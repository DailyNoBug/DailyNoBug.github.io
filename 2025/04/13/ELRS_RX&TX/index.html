<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>ELRS_RX&amp;TX | SCBLOG</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="ELRS信号收发ELRS介绍ExpressLRS（简称 ELRS）是一个开源的、高性能的无线电控制（RC）链路系统。它主要用于遥控模型（如无人机、固定翼飞机、遥控车等），旨在提供长距离、低延迟、高刷新率和高抗干扰性的无线连接。 核心特点：  开源: 固件代码完全开放，由社区驱动开发和维护。 高性能: 相较于许多传统 RC 协议，ELRS 提供更低的延迟（可达毫秒级）和更高的数据包刷新率（可达 10">
<meta property="og:type" content="article">
<meta property="og:title" content="ELRS_RX&amp;TX">
<meta property="og:url" content="https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/index.html">
<meta property="og:site_name" content="SCBLOG">
<meta property="og:description" content="ELRS信号收发ELRS介绍ExpressLRS（简称 ELRS）是一个开源的、高性能的无线电控制（RC）链路系统。它主要用于遥控模型（如无人机、固定翼飞机、遥控车等），旨在提供长距离、低延迟、高刷新率和高抗干扰性的无线连接。 核心特点：  开源: 固件代码完全开放，由社区驱动开发和维护。 高性能: 相较于许多传统 RC 协议，ELRS 提供更低的延迟（可达毫秒级）和更高的数据包刷新率（可达 10">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-04-13T09:17:51.000Z">
<meta property="article:modified_time" content="2025-04-14T14:25:19.204Z">
<meta property="article:author" content="black liu">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="SCBLOG" href="/atom.xml">
    
    <link rel="shortcut icon" href="/">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpeg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">black liu</h5>
          <a href="mailto:liusc0616@gmail.com" title="liusc0616@gmail.com" class="mail">liusc0616@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/DailyNoBug" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">ELRS_RX&amp;TX</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">ELRS_RX&amp;TX</h1>
        <h5 class="subtitle">
            
                <time datetime="2025-04-13T09:17:51.000Z" itemprop="datePublished" class="page-time">
  2025-04-13
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ELRS信号收发"><span class="post-toc-number">1.</span> <span class="post-toc-text">ELRS信号收发</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ELRS介绍"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">ELRS介绍</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ELRS-实现原理"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">ELRS 实现原理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CRSF协议介绍"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">CRSF协议介绍</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是-CRSF-协议？"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">什么是 CRSF 协议？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#主要特点"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">主要特点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通信流程"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">通信流程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#帧结构"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">帧结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#常见帧类型示例"><span class="post-toc-number">1.3.5.</span> <span class="post-toc-text">常见帧类型示例</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#物理层-UART"><span class="post-toc-number">1.3.6.</span> <span class="post-toc-text">物理层 (UART)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#硬件设计"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">硬件设计</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-通用硬件要求-TX-和-RX"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">2.1. 通用硬件要求 (TX 和 RX)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-发射端-TX-特定设计"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">2.2. 发射端 (TX) 特定设计</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-接收端-RX-特定设计"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">2.3. 接收端 (RX) 特定设计</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#软件设计"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">软件设计</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考文档"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">参考文档</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-ELRS_RX&amp;TX"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">ELRS_RX&TX</h1>
        <div class="post-meta">
            <time class="post-time" title="2025-04-13 09:17:51" datetime="2025-04-13T09:17:51.000Z"  itemprop="datePublished">2025-04-13</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="ELRS信号收发"><a href="#ELRS信号收发" class="headerlink" title="ELRS信号收发"></a>ELRS信号收发</h1><h2 id="ELRS介绍"><a href="#ELRS介绍" class="headerlink" title="ELRS介绍"></a>ELRS介绍</h2><p>ExpressLRS（简称 ELRS）是一个<strong>开源</strong>的、<strong>高性能</strong>的无线电控制（RC）链路系统。它主要用于遥控模型（如无人机、固定翼飞机、遥控车等），旨在提供<strong>长距离</strong>、<strong>低延迟</strong>、<strong>高刷新率</strong>和<strong>高抗干扰性</strong>的无线连接。</p>
<p><strong>核心特点：</strong></p>
<ol>
<li><strong>开源:</strong> 固件代码完全开放，由社区驱动开发和维护。</li>
<li><strong>高性能:</strong> 相较于许多传统 RC 协议，ELRS 提供更低的延迟（可达毫秒级）和更高的数据包刷新率（可达 1000Hz）。</li>
<li><strong>远距离:</strong> 基于 Semtech 的 LoRa（远距离）物理层调制技术（以及 2.4GHz 上的 FLRC），即使在较低功率下也能实现数公里甚至数十公里的控制距离。</li>
<li><strong>高抗干扰:</strong> 结合了 LoRa&#x2F;FLRC 调制和跳频技术（FHSS），在复杂的无线环境中具有更好的鲁棒性。</li>
<li><strong>成本效益:</strong> 通常基于 ESP32、ESP8285 或 STM32 等低成本微控制器和 Semtech SX127x (868&#x2F;915MHz) 或 SX128x (2.4GHz) 射频芯片构建。</li>
<li><strong>丰富功能:</strong> 支持完整的遥测回传、动态发射功率调整、无线固件更新等。</li>
</ol>
<h2 id="ELRS-实现原理"><a href="#ELRS-实现原理" class="headerlink" title="ELRS 实现原理"></a>ELRS 实现原理</h2><p>ELRS 的实现依赖于硬件（射频芯片+MCU）和软件（ELRS 固件）的结合。其核心原理可以概括为以下几点：</p>
<ol>
<li><strong>物理层调制 (PHY):</strong><ul>
<li>主要使用 <strong>LoRa</strong> 调制：这是一种扩频调制技术，通过牺牲一部分数据传输速率来换取极高的接收灵敏度（意味着可以接收到非常微弱的信号）和抗干扰能力，从而实现远距离通信。</li>
<li>在 2.4GHz 频段，ELRS 也支持 <strong>FLRC</strong> (Fast Long Range Communication) 调制，它能在保持较好距离和抗干扰性的同时，提供比 LoRa 更高的数据速率和更低的延迟。固件会根据配置（如数据包速率）智能选择使用 LoRa 还是 FLRC。</li>
</ul>
</li>
<li><strong>数据链路层:</strong><ul>
<li><strong>定制协议:</strong> ELRS 定义了自己的数据包结构，针对 RC 控制信号（通道数据）和遥测数据进行了优化，力求高效和低延迟。</li>
<li><strong>跳频扩频 (FHSS):</strong> 为了进一步抵抗干扰和提高链路的鲁棒性，ELRS 在多个预设的信道之间快速切换频率进行通信。发射机和接收机使用同步的跳频序列。</li>
<li><strong>绑定机制:</strong> 发射机（TX）和接收机（RX）通过一个用户设定的“绑定短语”（Binding Phrase）进行安全配对。只有拥有相同绑定短语的设备才能建立连接，防止被其他设备控制。</li>
<li><strong>同步:</strong> 发射机和接收机需要精确同步它们的时钟和跳频序列才能成功通信。</li>
</ul>
</li>
<li><strong>软件固件:</strong><ul>
<li>ELRS 固件运行在发射机和接收机模块的 MCU 上。</li>
<li><strong>发射端 (TX):</strong> 固件从遥控器（通过串行端口如 CRSF 协议）读取用户的控制输入，将其打包成 ELRS 格式，控制 SX12xx 芯片进行调制、跳频并发射。同时接收来自接收机的遥测数据并传回遥控器显示。</li>
<li><strong>接收端 (RX):</strong> 固件控制 SX12xx 芯片接收信号，进行解调和跳频同步。接收到有效数据包后，解包并将控制数据通过串行端口（通常是 CRSF 协议）发送给飞控或其他伺服设备。同时，它可以从飞控收集遥测数据，打包并发回给发射机。</li>
</ul>
</li>
</ol>
<h2 id="CRSF协议介绍"><a href="#CRSF协议介绍" class="headerlink" title="CRSF协议介绍"></a>CRSF协议介绍</h2><h3 id="什么是-CRSF-协议？"><a href="#什么是-CRSF-协议？" class="headerlink" title="什么是 CRSF 协议？"></a>什么是 CRSF 协议？</h3><p>CRSF (Crossfire Protocol) 是由 Team BlackSheep (TBS) 公司为其 Crossfire 远程无线电控制 (RC) 系统开发的一种<strong>双向串行通信协议</strong>。它主要用于在 RC 发射机（或其射频模块）与 RC 接收机（或飞行控制器）之间传输控制信号和遥测数据。</p>
<p>由于其高效、低延迟和强大的功能集，CRSF 已成为现代 RC 系统（包括 ExpressLRS、Tracer 等）和飞行控制器固件（如 Betaflight, INAV, ArduPilot）中广泛采用的事实标准。</p>
<h3 id="主要特点"><a href="#主要特点" class="headerlink" title="主要特点"></a>主要特点</h3><ul>
<li><strong>双向通信:</strong> 支持从发射机到接收机&#x2F;飞控的 RC 通道数据传输，以及从接收机&#x2F;飞控到发射机的遥测数据（如信号强度、电池电压、GPS 等）回传。</li>
<li><strong>串行传输:</strong> 通常通过 UART (通用异步收发传输器) 接口进行通信，物理连接简单。</li>
<li><strong>高效率:</strong> 采用紧凑的二进制数据帧格式，减少了传输开销。</li>
<li><strong>低延迟:</strong> 设计目标之一就是最小化控制链路的延迟。</li>
<li><strong>高数据包速率:</strong> 支持较高的更新频率，以匹配 ELRS 等高性能 RC 链路。</li>
<li><strong>可扩展性:</strong> 协议定义了多种帧类型，可以传输各种遥测信息，并支持设备发现、配置等高级功能。</li>
<li><strong>广泛支持:</strong> 被众多开源和商业 RC 产品及飞控固件支持。</li>
</ul>
<h3 id="通信流程"><a href="#通信流程" class="headerlink" title="通信流程"></a>通信流程</h3><p>CRSF 通信是主从式的，通常：</p>
<ol>
<li><strong>发射机&#x2F;TX 模块 -&gt; 接收机&#x2F;飞控:</strong><ul>
<li>发送 RC 通道数据（包含摇杆、开关等位置信息）。</li>
<li>发送设备查询 (Ping) 消息。</li>
<li>发送配置命令。</li>
</ul>
</li>
<li><strong>接收机&#x2F;飞控 -&gt; 发射机&#x2F;TX 模块:</strong><ul>
<li>响应设备查询，发送设备信息。</li>
<li>主动发送遥测数据帧，如：<ul>
<li>链路统计信息 (RSSI, LQ, SNR)</li>
<li>电池传感器信息 (电压, 电流, 容量)</li>
<li>GPS 位置信息</li>
<li>姿态信息</li>
<li>飞行模式</li>
<li>等等…</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="帧结构"><a href="#帧结构" class="headerlink" title="帧结构"></a>帧结构</h3><p>CRSF 使用二进制帧格式，其基本结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Device Address&gt; &lt;Frame Length&gt; &lt;Frame Type&gt; &lt;Payload&gt; &lt;CRC8&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Device Address (1 byte):</strong> 帧的目标或来源设备地址（同步字节）。常见地址：<ul>
<li><code>0xC8</code>: 飞行控制器 (Flight Controller)</li>
<li><code>0xEA</code>: 无线电发射机 (Radio Transmitter)</li>
<li><code>0xEE</code>: 接收机 (Receiver)</li>
<li><code>0xEF</code>: TBS Core PNP Pro</li>
<li>… 其他地址用于不同设备</li>
</ul>
</li>
<li><strong>Frame Length (1 byte):</strong> <code>Frame Type</code> + <code>Payload</code> + <code>CRC8</code> 的总字节数。最大长度通常限制在 62 字节（总帧长 64 字节）。</li>
<li><strong>Frame Type (1 byte):</strong> 定义了 Payload 中包含的数据类型。</li>
<li><strong>Payload (Variable length):</strong> 实际的数据内容，其结构由 <code>Frame Type</code> 决定。</li>
<li><strong>CRC8 (1 byte):</strong> 循环冗余校验码，用于校验从 <code>Frame Type</code> 开始到 <code>Payload</code> 结束的数据完整性。通常使用 CRC-8-DVB-S2 多项式 (0xD5)。</li>
</ul>
<h3 id="常见帧类型示例"><a href="#常见帧类型示例" class="headerlink" title="常见帧类型示例"></a>常见帧类型示例</h3><ul>
<li><code>0x16</code>: <code>CRSF_FRAMETYPE_RC_CHANNELS_PACKED</code> - 包含压缩的 RC 通道数据（通常是 16 个通道，每个通道 11 位）。这是从发射机到接收机&#x2F;飞控最核心的数据帧。</li>
<li><code>0x14</code>: <code>CRSF_FRAMETYPE_LINK_STATISTICS</code> - 包含链路统计信息，如上行&#x2F;下行 RSSI、LQ (链路质量)、SNR (信噪比) 等。</li>
<li><code>0x08</code>: <code>CRSF_FRAMETYPE_BATTERY_SENSOR</code> - 包含电池信息，如电压 (mV)、电流 (cA)、已用容量 (mAh)。</li>
<li><code>0x02</code>: <code>CRSF_FRAMETYPE_GPS</code> - 包含 GPS 信息，如经度、纬度、地速、高度、卫星数等。</li>
<li><code>0x28</code>: <code>CRSF_FRAMETYPE_DEVICE_PING</code> - 设备查询帧。</li>
<li><code>0x29</code>: <code>CRSF_FRAMETYPE_DEVICE_INFO</code> - 设备信息响应帧，包含设备名称、硬件&#x2F;软件版本等。</li>
<li><code>0x07</code>: <code>CRSF_FRAMETYPE_ATTITUDE</code> - 包含姿态信息（俯仰、滚转、偏航角）。</li>
</ul>
<h3 id="物理层-UART"><a href="#物理层-UART" class="headerlink" title="物理层 (UART)"></a>物理层 (UART)</h3><ul>
<li><strong>接口:</strong> 标准 UART (TX, RX 引脚)。</li>
<li><strong>电平:</strong> 通常为 3.3V TTL 电平。</li>
<li><strong>参数:</strong> 8 数据位, 无校验位, 1 停止位 (8N1)。</li>
<li><strong>波特率:</strong> 常见的波特率包括 115200 bps, 400000 bps, 420000 bps 等。ELRS 通常使用较高的波特率（如 400k 或更高）以匹配其高数据包速率。发射机和接收机&#x2F;飞控必须配置为使用相同的波特率。</li>
</ul>
<h2 id="硬件设计"><a href="#硬件设计" class="headerlink" title="硬件设计"></a>硬件设计</h2><p>发射端和接收端的硬件设计在核心连接上类似，主要区别在于与外部设备（遥控器或飞控）的接口。</p>
<h3 id="2-1-通用硬件要求-TX-和-RX"><a href="#2-1-通用硬件要求-TX-和-RX" class="headerlink" title="2.1. 通用硬件要求 (TX 和 RX)"></a>2.1. 通用硬件要求 (TX 和 RX)</h3><ol>
<li><strong>主控 MCU 选择:</strong><ul>
<li><strong>推荐:</strong> ESP32 系列 (因其性能、成本和 ELRS 社区广泛支持)。STM32 系列 (如 STM32F1, F4 等) 也是可选方案。</li>
<li><strong>要求:</strong><ul>
<li>高速 SPI 接口 (数据手册建议 &lt;&#x3D; 10MHz, CPOL&#x3D;0, CPHA&#x3D;0)。</li>
<li>足够的 GPIO 引脚用于连接模块的控制线 (NSS, RST, BUSY, DIO1, DIO2, DIO3, TXEN, RXEN)。</li>
<li>至少一个 UART 接口用于与遥控器&#x2F;飞控通信 (通常使用 CRSF 协议) 或用于调试&#x2F;烧录。</li>
<li>足够的 Flash 和 RAM 以运行 ELRS 固件。</li>
</ul>
</li>
</ul>
</li>
<li><strong>VG2392S240X0M2 模块与 MCU 连接:</strong><ul>
<li><strong>电源 (VCC, GND):</strong><ul>
<li>提供稳定的 3.1V 至 3.6V 电源，<strong>典型值为 3.3V</strong> (手册 Page 4)。</li>
<li>强烈建议使用低噪声 LDO 为模块供电 (手册 Page 8)。</li>
<li>在模块 VCC 引脚附近放置滤波电容，如 100nF 和 10uF (手册 Page 7 电路图示例)。</li>
<li>确保良好的接地，将模块的 GND 引脚 (Pin 2, 15) 连接到 MCU 的地。</li>
</ul>
</li>
<li><strong>SPI 接口:</strong><ul>
<li>MCU <code>MOSI</code> -&gt; 模块 <code>MOSI</code> (Pin 6)</li>
<li>MCU <code>MISO</code> &lt;- 模块 <code>MISO</code> (Pin 7)</li>
<li>MCU <code>SCK</code> -&gt; 模块 <code>SCK</code> (Pin 4)</li>
<li>MCU <code>NSS</code> -&gt; 模块 <code>NSS</code> (Pin 3)</li>
</ul>
</li>
<li><strong>控制引脚:</strong><ul>
<li>MCU <code>GPIO</code> -&gt; 模块 <code>RST</code> (Pin 8, 低电平有效复位)</li>
<li>MCU <code>GPIO</code> &lt;- 模块 <code>BUSY</code> (Pin 9, 高电平表示模块忙)</li>
<li>MCU <code>GPIO</code> (中断输入) &lt;- 模块 <code>DIO1</code> (Pin 10, 用于 TxDone, RxDone 等中断)</li>
<li>MCU <code>GPIO</code> &lt;-&gt; 模块 <code>DIO2</code> (Pin 11, 可配置功能，ELRS 可能用于天线切换或其他)</li>
<li>MCU <code>GPIO</code> &lt;-&gt; 模块 <code>DIO3</code> (Pin 12, 可配置功能)</li>
</ul>
</li>
<li><strong>PA&#x2F;LNA 控制 (关键):</strong><ul>
<li>MCU <code>GPIO</code> -&gt; 模块 <code>TXEN</code> (Pin 13, 发射使能，高电平有效)</li>
<li>MCU <code>GPIO</code> -&gt; 模块 <code>RXEN</code> (Pin 14, 接收使能，高电平有效)</li>
<li><strong>注意:</strong> ELRS 固件必须根据当前操作（发射、接收、空闲&#x2F;休眠）精确控制这两个引脚的电平 (逻辑见手册 Page 13)。</li>
</ul>
</li>
</ul>
</li>
<li><strong>天线:</strong><ul>
<li><strong>选择:</strong> 模块提供三种天线连接方式：板载 PCB 天线 (默认)、IPEX-1 座、邮票孔半孔 (手册 Page 5)。</li>
<li><strong>跳线电阻:</strong> 如果不使用默认的板载 PCB 天线，需要根据手册 Page 9 的图示修改模块内部的 0 欧姆跳线电阻，将信号路径切换到 IPEX 座或邮票孔 ANT 引脚 (Pin 1)。</li>
<li><strong>外部天线:</strong> 若使用外部天线 (通过 IPEX 或邮票孔)，需选择 2.4GHz 频段、50 欧姆阻抗的天线。</li>
<li><strong>RF 走线 (若使用邮票孔):</strong> 从模块 ANT 引脚 (Pin 1) 到天线连接器的 PCB 走线应尽可能短、直，保持 50 欧姆特性阻抗。遵循手册 Page 9-10 的 RF 走线和拐弯建议。避免直角拐弯，推荐圆弧或 45 度角。</li>
<li><strong>布局:</strong> 确保天线（尤其是板载 PCB 天线）远离金属外壳、电池、大型元器件和 PCB 接地铜皮覆盖区域，以保证辐射效率 (手册 Page 11)。</li>
</ul>
</li>
</ol>
<h3 id="2-2-发射端-TX-特定设计"><a href="#2-2-发射端-TX-特定设计" class="headerlink" title="2.2. 发射端 (TX) 特定设计"></a>2.2. 发射端 (TX) 特定设计</h3><ul>
<li><strong>与遥控器接口:</strong> 通常通过 UART 连接到遥控器主板，使用 CRSF 协议传输通道数据和接收遥测数据。</li>
<li><strong>用户接口 (可选):</strong> 可添加按钮用于绑定或功能切换，添加 LED 指示灯显示电源、连接状态、遥测状态等。</li>
</ul>
<h3 id="2-3-接收端-RX-特定设计"><a href="#2-3-接收端-RX-特定设计" class="headerlink" title="2.3. 接收端 (RX) 特定设计"></a>2.3. 接收端 (RX) 特定设计</h3><ul>
<li><strong>与飞控接口:</strong> 通常通过 UART 连接到飞控，使用 CRSF 协议发送控制指令和接收遥测数据请求。</li>
<li><strong>用户接口 (可选):</strong> 可添加 LED 指示灯显示电源、连接状态、绑定状态等。</li>
</ul>
<h2 id="软件设计"><a href="#软件设计" class="headerlink" title="软件设计"></a>软件设计</h2><p>软件设计的核心是配置和编译适用于该硬件组合的 ELRS 固件。</p>
<ol>
<li><strong>获取固件:</strong><ul>
<li>使用官方 <strong>ExpressLRS Configurator</strong> 工具，这是最简单的方式。</li>
<li>或者从 ExpressLRS GitHub 仓库 (<a href="https://github.com/ExpressLRS/ExpressLRS" target="_blank" rel="noopener">https://github.com/ExpressLRS/ExpressLRS</a>) 获取源码，使用 PlatformIO 进行编译。</li>
</ul>
</li>
<li><strong>硬件目标 (Target) 配置:</strong><ul>
<li><strong>关键步骤:</strong> 需要在 ELRS Configurator 或 PlatformIO 环境中选择或定义一个硬件目标，该目标必须与您使用的 MCU 以及 VG2392S240X0M2 模块的引脚连接相匹配。</li>
<li><strong>PA&#x2F;LNA 控制:</strong> 由于此模块带有外部 PA&#x2F;LNA，<strong>必须</strong>选择一个支持 <code>TXEN</code> 和 <code>RXEN</code> 引脚控制的 ELRS 硬件目标配置。如果官方没有完全匹配的预设目标，您可能需要：<ul>
<li>查找基于相同 MCU 且使用类似 PA&#x2F;LNA 控制方式 (如 RadioMaster Ranger Micro 2.4GHz 等) 的目标作为参考。</li>
<li>或者，在 PlatformIO 中创建自定义硬件布局 (Hardware Layout)，在对应的 <code>.ini</code> 文件或 <code>user_defines.txt</code> &#x2F; <code>hardware.h</code> 中正确定义 <code>RADIO_TXEN_PIN</code> 和 <code>RADIO_RXEN_PIN</code> 所连接的 MCU GPIO 引脚号。</li>
</ul>
</li>
<li><strong>引脚定义:</strong> 确保配置文件中定义的 SPI (MOSI, MISO, SCK, NSS)、RST、BUSY、DIO1 (IRQ) 引脚与硬件连接一致。DIO2&#x2F;DIO3 根据 ELRS 目标是否使用它们来决定是否需要定义。</li>
</ul>
</li>
<li><strong>关键固件配置参数:</strong><ul>
<li><strong>Regulatory Domain:</strong> 选择 <code>ISM_2400</code>。</li>
<li><strong>Binding Phrase:</strong> 为 TX 和 RX 设置相同的绑定短语。</li>
<li><strong>TX&#x2F;RX Role:</strong> 分别为发射端和接收端固件选择 <code>TX</code> 或 <code>RX</code>。</li>
<li><strong>Radio Output Power (重要!):</strong><ul>
<li>模块手册 (Page 4, 12) 指出，当 SX1281 内部输出设置为 0dBm 时，模块最终输出可达 27dBm。</li>
<li>因此，在 ELRS 固件配置中，<strong>不能</strong>直接设置目标输出功率为 27dBm。您需要配置 ELRS，使其驱动 SX1281 芯片输出较低的功率（例如 0dBm 或根据实际 PA 增益计算得出的值）。</li>
<li>具体的配置方式依赖于所选的 ELRS 硬件目标。通常在硬件配置文件 (<code>hardware.h</code> 或类似文件) 中会有功率相关的定义，需要确保这些定义与模块的 PA 增益相匹配，以避免损坏 PA 或输出功率超标。<strong>务必仔细查阅所选 ELRS 目标关于功率设置的说明，或在自定义目标时正确设置功率表。</strong> 手册建议 SX1281 输出不要超过 5dBm (Page 12)。</li>
</ul>
</li>
<li><strong>Packet Rate &#x2F; Telemetry Ratio:</strong> 根据需求选择合适的速率和遥测比率。</li>
</ul>
</li>
<li><strong>编译与烧录:</strong><ul>
<li>使用 ELRS Configurator 或 PlatformIO 编译固件。</li>
<li>通过 USB 转串口工具或其他烧录方式将编译好的固件分别烧录到 TX 和 RX 模块的 MCU 中。</li>
</ul>
</li>
</ol>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ol>
<li><a href="https://www.expresslrs.org/hardware/hardware-selection/" target="_blank" rel="noopener">ELRS官方网站</a></li>
</ol>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2025-04-14T14:25:19.204Z" itemprop="dateUpdated">2025-04-14 14:25:19</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2025/04/13/ELRS_RX&amp;TX/" target="_blank" rel="external">https://dailynobug.github.io/2025/04/13/ELRS_RX&amp;TX/</a>
        
    </div>
    
    <footer>
        <a href="https://dailynobug.github.io">
            <img src="/img/avatar.jpeg" alt="black liu">
            black liu
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/&title=《ELRS_RX&TX》 — SCBLOG&pic=https://dailynobug.github.io/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/&title=《ELRS_RX&TX》 — SCBLOG&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《ELRS_RX&TX》 — SCBLOG&url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/&via=https://dailynobug.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2025/04/14/mipi_csi_imx415/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">mipi_csi_imx415</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2025/03/30/pt_questions/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">pt-questions</h4>
      </a>
    </div>
  
</nav>



    




















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license noopener" href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>black liu &copy; 2021 - 2025</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/&title=《ELRS_RX&TX》 — SCBLOG&pic=https://dailynobug.github.io/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/&title=《ELRS_RX&TX》 — SCBLOG&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《ELRS_RX&TX》 — SCBLOG&url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/&via=https://dailynobug.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://dailynobug.github.io/2025/04/13/ELRS_RX&TX/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'Error!';
            clearTimeout(titleTime);
        } else {
            document.title = 'daydaynobug';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
